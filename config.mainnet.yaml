# =============================================================================
# Canton-Ethereum Bridge - Mainnet Configuration
# =============================================================================
# This config connects to ChainSafe's Canton Mainnet and Ethereum Mainnet.
#
# BEFORE USING:
# - Update all contract addresses with deployed mainnet contracts
# - Update party and domain IDs for mainnet
# - Ensure JWT token is valid for mainnet
# - Review all security settings carefully
#
# See docs/MAINNET_SETUP.md for full setup details
# =============================================================================

server:
  host: "0.0.0.0"
  port: 8080

database:
  host: "localhost"
  port: 5432
  user: "postgres"
  password: "p@ssw0rd"
  database: "relayer"
  ssl_mode: "disable"

ethereum:
  rpc_url: "https://mainnet.infura.io/v3/4d58b6c655cb44de9b61a29b7586d59b"  # Mainnet RPC URL (e.g., https://mainnet.infura.io/v3/YOUR_KEY)
  ws_url: "wss://mainnet.infura.io/ws/v3/4d58b6c655cb44de9b61a29b7586d59b"   # WebSocket URL for mainnet
  chain_id: 1
  bridge_contract: "0x68BA926BC0f2dd37586c22828d55C6ac534780e8"  # Mainnet CantonBridge address
  token_contract: "0x28d38dF637dB75533bD3F71426F3410a82041544"   # Mainnet PromptToken address
  relayer_private_key: ""  # Set via RELAYER_PRIVATE_KEY env var or secrets/mainnet-relayer-key.txt
  confirmation_blocks: 12  # Higher for mainnet security
  gas_limit: 300000
  max_gas_price: "50000000000"  # 50 gwei - adjust based on network conditions
  polling_interval: "15s"       # Slower for mainnet
  start_block: 23989600  # Set to recent block before first deposit 
  #TODO: : search recent blocks for deposits

canton:
  # Canton Mainnet Ledger API
  rpc_url: "canton-ledger-api-grpc-prod1.chainsafe.dev:80"  # Mainnet Canton endpoint
  ledger_id: ""
  domain_id: "global-domain::1220b1431ef217342db44d516bb9befde802be7d8899637d290895fa58880f19accc"        # Mainnet domain ID
  application_id: "canton-middleware"
  relayer_party: "daml-autopilot::122043f0b94e28125e4c65aa7e0f0ded912472731695f01cc83aa41ad3f03965a19b"
  bridge_package_id: "6694b7794de78352c5893ded301e6cf0080db02cbdfa7fab23cfd9e8a56eb73d"
  core_package_id: "60c0e065bc4bb98d0ef9507e28666e18c8af0f68c56fc224d4a7f423a20909bc"
  bridge_module: "Wayfinder.Bridge"
  bridge_contract: "0x68BA926BC0f2dd37586c22828d55C6ac534780e8"
  
  # TLS enabled for mainnet
  tls:
    enabled: false

  # JWT Authentication for mainnet
  auth:
    token_file: "secrets/mainnet-token.txt"
  
  polling_interval: "5s"

bridge:
  max_transfer_amount: "1000000000000000000000"  # 1000 tokens
  min_transfer_amount: "1000000000000000"        # 0.001 tokens
  rate_limit_per_hour: 50   # Lower for mainnet safety
  max_retries: 5            # More retries for mainnet
  retry_delay: "30s"        # Longer delays for mainnet
  processing_interval: "10s"

monitoring:
  enabled: true
  metrics_port: 9090
  health_check_url: "/health"

logging:
  level: "info"       # Less verbose for mainnet
  format: "json"      # JSON for production logging
  output_path: "stdout"
