# =============================================================================
# ERC-20 API Server Configuration (Docker)
# =============================================================================
# This config is used by the api-server container. Values are populated by
# the bootstrap script at runtime.
# =============================================================================

server:
  host: "0.0.0.0"
  port: 8081

database:
  host: "postgres"
  port: 5432
  user: "postgres"
  password: "p@ssw0rd"
  database: "erc20_api"
  ssl_mode: "disable"

canton:
  rpc_url: "canton:5011"
  domain_id: ""
  application_id: "erc20-api"
  relayer_party: ""
  bridge_package_id: "75247fd91629e44afacef3088c18897292469c9dcecd233180ea13a3af1b5089"
  common_package_id: "c4d8bc62b74dfb93c0feda15cbceb5db16aef37d0e7ee37c17887faa9cbd33b9"
  core_package_id: "67fbac59de51d7a0372dbc106d0308f88959258ccd571e61017adf8fedac7c9a"
  cip56_package_id: "168483ce8a80e76f69f7392ceaa9ff57b1036b8fb41ccb3d410b087048195a92"
  splice_holding_package_id: "718a0f77e505a8de22f188bd4c87fe74101274e9d4cb1bfac7d09aec7158d35b"
  splice_transfer_package_id: "55ba4deb0ad4662c4168b39859738a0e91388d252286480c7331b3f71a517281"
  instrument_admin: ""  # Set by bootstrap (same as relayer_party)
  instrument_id: "PROMPT"
  bridge_module: "Wayfinder.Bridge"
  tls:
    enabled: false
  auth:
    client_id: "local-test-client"
    client_secret: "local-test-secret"
    audience: "http://canton:5011"
    token_url: "http://mock-oauth2:8088/oauth/token"
  max_inbound_message_size: 52428800

# Token metadata (PROMPT - bridge token)
token:
  name: "PROMPT"
  symbol: "PROMPT"
  decimals: 18

# DEMO token metadata (native Canton token)
demo_token:
  name: "Demo Token"
  symbol: "DEMO"
  decimals: 18

# Ethereum JSON-RPC facade (MetaMask compatibility)
eth_rpc:
  enabled: true
  chain_id: 31337  # Anvil local chain ID
  token_address: "0x5FbDB2315678afecb367f032d93F642f64180aa3"  # PROMPT on Anvil
  demo_token_address: "0xDE30000000000000000000000000000000000001"
  gas_price_wei: "1000000000"
  gas_limit: 21000
  native_balance_wei: "1000000000000000000000"
  request_timeout: "30s"

# JWKS endpoint for JWT validation (optional - if not using EVM signatures)
jwks:
  url: ""
  issuer: ""

logging:
  level: "debug"
  format: "json"

# Reconciliation settings
reconciliation:
  initial_timeout: "2m"
  interval: "10s"  # Faster reconciliation for testing

# Shutdown settings
shutdown:
  timeout: "30s"

