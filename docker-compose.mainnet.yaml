# Docker Compose override for Mainnet
# Usage: docker compose -f docker-compose.local.yaml -f docker-compose.mainnet.yaml up -d
#
# This overlay:
# - Disables local Canton, Anvil, deployer (using mainnet services)
# - Disables mock-oauth2 and bootstrap (not needed for mainnet)
# - Keeps Postgres for relayer state
# - Uses config.mainnet.yaml

services:
  # Disable local services - using mainnet
  canton:
    profiles: ["disabled"]

  anvil:
    profiles: ["disabled"]

  deployer:
    profiles: ["disabled"]

  mock-oauth2:
    profiles: ["disabled"]

  bootstrap:
    profiles: ["disabled"]

  relayer:
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
      postgres:
        condition: service_healthy
    volumes:
      - ./config.mainnet.yaml:/app/config.yaml:ro

  # Postgres stays enabled for relayer state
